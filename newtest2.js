let mytext =
  "80% OFF\n Multi - use code: ZK7XL7YL\nhttps://amzn.to/2TJYl7q\n#0617TodaysDeals\n#savings #coupons #promo #sales #deals #discounts #promocode #onlineshopping #shopping #frugal #online #onlinedeals #couponcommunity #neverpayretail #neverpayfullprice #discount #savingmoney #promos\n Price and availability are accurate as of the date/time indicated and are subject to change at any time.️Code/coupon/promotion, if any, may expire at any time without notice.️Content provided is 'AS IS' and is subject to change or removal at any time. I do not own this Photo, It is Property Of the Seller listed in the Link.*As an Amazon Associate I earn from qualifying purchases";
// "𝐒𝐄𝐕𝐄𝐍𝐓𝐘 𝐏𝐄𝐑𝐂𝐄𝐍𝐓 𝐎𝐅𝐅 \nUse promo code: 70TJVD7K\nWorks only on Sunset Red option with a quantity limit of 1\nhttps://amzn.to/3wAmuvA\n(𝑷𝒂𝒊𝒅 𝑳𝒊𝒏𝒌)\n 𝘓𝘦𝘵 𝘮𝘦 𝘬𝘯𝘰𝘸 𝘪𝘧 𝘺𝘰𝘶 𝘴𝘤𝘰𝘳𝘦𝘥 𝘵𝘩𝘪𝘴 𝘥𝘦𝘢𝘭! 𝐇𝐈𝐓 𝐓𝐇𝐀𝐓 𝐒𝐇𝐀𝐑𝐄 𝐁𝐔𝐓𝐓𝐎𝐍 𝘪𝘧 𝘺𝘰𝘶 𝘬𝘯𝘰𝘸 𝘴𝘰𝘮𝘦𝘰𝘯𝘦 𝘸𝘩𝘰 𝘮𝘪𝘨𝘩𝘵 𝘭𝘪𝘬𝘦 𝘵𝘩𝘪𝘴 𝘥𝘦𝘢𝘭 𝘵𝘰𝘰!\nPetrichor Sunset Lamp Projector, Sunset Projection 180 Degree Rotation Projection Lamp Romantic Visual Led Light for Photography/Selfie/Home/Living Room/Bedroom Decor (Sunset Red)";
// "50% off Built in Sink Soap Dispenser\nUse promo code: 50ZHXHZP at checkout\nCode works on select options\nhttps://amzn.to/3cRWxzY #Ad";
// "4pcs Pie pans\n off with code 604MN6DY\nhttps://www.amazon.com/dp/B085ZLY646/\n#ad #bloomingdeals #bloomingdeals4U";
// "60% OFF \nUse promo code: ULRNVV5A\nhttps://amzn.to/3zEuOw6\n(𝑷𝒂𝒊𝒅 𝑳𝒊𝒏𝒌)\n 𝘓𝘦𝘵 𝘮𝘦 𝘬𝘯𝘰𝘸 𝘪𝘧 𝘺𝘰𝘶 𝘴𝘤𝘰𝘳𝘦𝘥 𝘵𝘩𝘪𝘴 𝘥𝘦𝘢𝘭! 𝐇𝐈𝐓 𝐓𝐇𝐀𝐓 𝐒𝐇𝐀𝐑𝐄 𝐁𝐔𝐓𝐓𝐎𝐍 𝘪𝘧 𝘺𝘰𝘶 𝘬𝘯𝘰𝘸 𝘴𝘰𝘮𝘦𝘰𝘯𝘦 𝘸𝘩𝘰 𝘮𝘪𝘨𝘩𝘵 𝘭𝘪𝘬𝘦 𝘵𝘩𝘪𝘴 𝘥𝘦𝘢𝘭 𝘵𝘰𝘰!\nDreaming Wapiti, 100% Washed Microfiber 3pcs Bedding Duvet Cover Set,Solid Color-Soft and Breathable with Zipper Closure & Corner Ties (Pink Mocha,Queen), 3 Peices";
// let mytext =
//   "DEAD DEAL! If you missed this deal, make sure to FOLLOW our Telegram for instant notifications on RUN DEALS & FREEBIES we post so you don't miss out next time! https://bit.ly/23f3234---------------- ＲＵＮ！ ＦＲＥＥ KIDS SCOOTER USE CODE: 507I1ZDU https://amzn.to/3gG4N7f (Paid Link) 𝘓𝘦𝘵 𝘮𝘦 𝘬𝘯𝘰𝘸 𝘪𝘧 𝘺𝘰𝘶 𝘴𝘯𝘢𝘨𝘨𝘦𝘥 𝘵𝘩𝘪𝘴! • 𝘛𝘏𝘐𝘚 𝘊𝘖𝘕𝘛𝘌𝘕𝘛 𝘐𝘚 𝘗𝘙𝘖𝘝𝘐𝘋𝘌𝘋 ‘𝘈𝘚 𝘐𝘚’ 𝘈𝘕𝘋 𝘐𝘚 𝘚𝘜𝘉𝘑𝘌𝘊𝘛 𝘛𝘖 𝘊𝘏𝘈𝘕𝘎𝘌 𝘖𝘙 𝘙𝘌𝘔𝘖𝘝𝘈𝘓 𝘞𝘐𝘛𝘏𝘖𝘜𝘛 𝘕𝘖𝘛𝘐𝘊𝘌 • 𝘗𝘳𝘰𝘮𝘰 𝘤𝘰𝘥𝘦𝘴, 𝘪𝘧 𝘢𝘷𝘢𝘪𝘭𝘢𝘣𝘭𝘦, 𝘮𝘢𝘺 𝘦𝘹𝘱𝘪𝘳𝘦 𝘢𝘯𝘺𝘵𝘪𝘮𝘦.";
let urlRegex =
  /(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/;

let selectedlink = "http://google.com";
// let mytextarray = mytext.split(" ");
// for (let p = 0; p < mytextarray.length; p++) {
//   if (urlRegex.test(mytextarray[p])) {
//     if (
//       mytextarray[p].indexOf("amzn.to") == -1 &&
//       mytextarray[p].indexOf("amazon.com") == -1
//     ) {
//       console.log("13", mytextarray[p]);
//       mytext = mytext.replace(mytextarray[p], "");
//     }
//   }
// }

// let possibleTextInArray = mytext
//   .replace(/\n/g, " ")
//   .replace(/(#\S+)/gi, "") // remove # tags
//   .replace("See More", "")
//   .replace("…", "")
//   .replace("ave", "save")

//   .replace(/http/, selectedlink)
//   .replace(urlRegex, selectedlink)
//   .replace(/0 %/g, "0%")
//   .replace(/5 %/g, "5%")
//   .replace(/6 %/g, "6%")
//   .replace(/7 %/g, "7%")
//   .replace(/8 %/g, "8%")
//   .replace(/9 %/g, "9%")
//   .split("Could we now")[0]
//   .split("𝘓𝘦𝘵 𝘮𝘦 𝘬𝘯𝘰𝘸")[0]
//   .split("COMMENT")[0]
//   .split("DROP A HEART")[0]
//   .split("Price and availability are accurate")[0]
//   .split("Product prices and availability")[0]
//   .split("This is an Affiliate post")[0]
//   .trim();

// console.log(possibleTextInArray, "answer");
let mytextarray = mytext.split(" ");
let finaltext = "";
for (let p = 0; p < mytextarray.length; p++) {
  if (finaltext) break;
  if (urlRegex.test(mytextarray[p])) {
    if (
      mytextarray[p].indexOf("amzn.to") == -1 &&
      mytextarray[p].indexOf("amazon.com") == -1
    ) {
      console.log("13", mytextarray[p]);
      mytext = mytext.replace(mytextarray[p], "");
    } else if (
      mytextarray[p].indexOf("amzn.to") !== -1 ||
      mytextarray[p].indexOf("amazon.com") !== -1
    ) {
      let arraytopossiblyremove = mytext.split(`${[mytextarray[p]]}`);
      let linkrelevanttext =
        arraytopossiblyremove.shift() + " " + mytextarray[p];

      console.log("start", mytextarray[p]);
      console.log("end");
      console.log(linkrelevanttext, 65);

      console.log(arraytopossiblyremove, 67);
      let newstring =
        linkrelevanttext +
        arraytopossiblyremove
          .join("")
          .split("\n")
          .filter((t) => {
            if (/code/gi.test(t) || /% /gi.test(t)) {
              return true;
            }

            if (
              /COMMENT/gi.test(t) ||
              /TELEGRAM/gi.test(t) ||
              /affiliate post/gi.test(t) ||
              /drop a post/gi.test(t) ||
              /t.me/gi.test(t) ||
              /𝘓𝘦𝘵 𝘮𝘦 𝘬𝘯𝘰𝘸/gi.test(t) ||
              /DROP A HEART/gi.test(t) ||
              /𝑷𝒂/g.test(t)
            ) {
              return false;
            }
            return false;
          })
          .join(" ");

      finaltext = newstring;
    }
  }
}

let possibleTextInArray = finaltext
  .replace(/\n/g, " ")
  .replace(/(#\S+)/gi, "") // remove # tags
  .replace("See More", "")
  .replace("…", "")
  .replace("ave", "save")

  .replace(/http/, selectedlink)
  .replace(urlRegex, selectedlink)
  .replace(/\(𝑷𝒂𝒊𝒅/gi, "")
  .replace(/0 %/g, "0%")
  .replace(/5 %/g, "5%")
  .replace(/6 %/g, "6%")
  .replace(/7 %/g, "7%")
  .replace(/8 %/g, "8%")
  .replace(/9 %/g, "9%")
  .split("Could we now")[0]
  .split("COMMENT")[0]
  .split("JOIN TELEGRAM")[0]
  .split("DROP A HEART")[0]
  .split("Price and availability are accurate")[0]
  .split("This is an Affiliate post")[0]
  .split("𝘓𝘦𝘵 𝘮𝘦 𝘬𝘯𝘰𝘸")[0]
  .trim();

console.log(possibleTextInArray, "answer");
